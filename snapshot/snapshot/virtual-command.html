<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-08-28T16:54:37.18409908"><title>ðŸ¤– Virtual Command | Cocoa Beans</title><script type="application/json" id="virtual-toc-data">[{"id":"introduction","level":0,"title":"Introduction","anchor":"#introduction"},{"id":"usage","level":0,"title":"Usage","anchor":"#usage"},{"id":"advantages","level":0,"title":"Advantages","anchor":"#advantages"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.css" rel="stylesheet"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="ðŸ¤– Virtual Command | Cocoa Beans"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Cocoa Beans Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation//snapshot/virtual-command.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="ðŸ¤– Virtual Command | Cocoa Beans"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation//snapshot/virtual-command.html#webpage",
    "url": "writerside-documentation//snapshot/virtual-command.html",
    "name": "ðŸ¤– Virtual Command | Cocoa Beans",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Cocoa Beans Help"
}</script><!-- End Schema.org --></head><body data-id="virtual-command" data-main-title="ðŸ¤– Virtual Command" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="commands.md|ðŸ’» The command system///examples.md|ðŸ“Œ Examples"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Cocoa Beans snapshot Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="virtual-command" id="virtual-command.md">ðŸ¤– Virtual Command</h1><p id="-rs4z6f_2"><sup class="superscript" id="-rs4z6f_3">Available Since 0.0.39</sup></p><p id="-rs4z6f_4"><span class="control" id="-rs4z6f_5">Table of content:</span></p><ul class="list _bullet" id="-rs4z6f_6"><li class="list__item" id="-rs4z6f_7"><p><a href="#introduction" id="-rs4z6f_8" data-tooltip="Virtual command">Introduction</a></p></li><li class="list__item" id="-rs4z6f_9"><p><a href="#usage" id="-rs4z6f_10" data-tooltip="">Usage</a></p></li><li class="list__item" id="-rs4z6f_11"><p><a href="#advantages" id="-rs4z6f_12" data-tooltip="">Advantages</a></p></li></ul><section class="chapter"><h2 id="introduction" data-toc="introduction">Introduction</h2><p id="-rs4z6f_13">Virtual command</p></section><section class="chapter"><h2 id="usage" data-toc="usage">Usage</h2><div class="tabs" id="-rs4z6f_14" data-anchors="[-rs4z6f_15,-rs4z6f_17]"><div class="tabs__content" data-gtm="tab" id="-rs4z6f_15" data-title="Using virtual command"><div class="code-block" data-lang="java" data-title="Java" data-disable-link-processing="true">    @Test
    void using() {
        SimpleCommand simpleCommand = new SimpleCommand();
        VirtualCommandFactory virtualCommandFactory = new VirtualCommandFactory();
        virtualCommandFactory.addMetadataMapper((element, metadata) -&gt; {
            Permission permission = element.getAnnotation(Permission.class);
            if (permission != null)
                metadata.put(&quot;permission&quot;, permission.value());
        });

        VirtualCommandDefinition virtualCommandDefinition = virtualCommandFactory.create(simpleCommand);

        TestCommandManager commandManager = new TestCommandManager();
        commandManager.registerArgumentTypeHandler(CommandManager.COMMON_PARSERS);
        commandManager.addMetadataHandler(metadata -&gt; {
            Set&lt;Requirement&gt; requirements = new HashSet&lt;&gt;();
            if (metadata.containsKey(&quot;permission&quot;))
                requirements.add(new PermissionFactory.PermissionImpl(null, (String) metadata.get(&quot;permission&quot;)));

            return requirements;
        });

        commandManager.addVirtualCommand(
                virtualCommandDefinition,
                context -&gt; {
                    context.sender().sendMessage(&quot;You run: &quot; + String.join(&quot; &quot;, context.args()));
                    return true;
                }
        );

        TestSender sender = new TestSender();
        // Tab competition
        assertEquals(
                List.of(),
                commandManager.handleTabComplete(sender, &quot;simple&quot;, new String[]{&quot;&quot;})
        );

        sender.addPermission(&quot;my.permission1&quot;);
        assertEquals(
                List.of(&quot;set&quot;),
                commandManager.handleTabComplete(sender, &quot;simple&quot;, new String[]{&quot;&quot;})
                        .stream()
                        .sorted()
                        .toList()
        );

        sender.addPermission(&quot;my.permission2&quot;);
        assertEquals(
                List.of(&quot;clear&quot;, &quot;set&quot;),
                commandManager.handleTabComplete(sender, &quot;simple&quot;, new String[]{&quot;&quot;})
                        .stream()
                        .sorted()
                        .toList()
        );

        assertEquals(
                List.of(&quot;set&quot;),
                commandManager.handleTabComplete(sender, &quot;simple&quot;, new String[]{&quot;se&quot;})
                        .stream()
                        .sorted()
                        .toList()
        );


        assertEquals(
                List.of(&quot;-&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;),
                commandManager.handleTabComplete(sender, &quot;simple&quot;, new String[]{&quot;set&quot;, &quot;&quot;})
                        .stream()
                        .sorted()
                        .toList()
        );

        // Execute
        // Will always call callback
        commandManager.handle(sender, &quot;simple&quot;, new String[]{&quot;set 63&quot;});
        assertEquals(
                List.of(&quot;You run: set 63&quot;),
                sender.getMessages()
        );

        sender.getMessages().clear();

        commandManager.handle(sender, &quot;simple&quot;, new String[]{&quot;random variant that isn't exists&quot;});
        assertEquals(
                List.of(&quot;You run: random variant that isn't exists&quot;),
                sender.getMessages()
        );
    }
</div></div><div class="tabs__content" data-gtm="tab" id="-rs4z6f_17" data-title="SimpleCommand.java"><div class="code-block" data-lang="java" data-title="Java" data-disable-link-processing="true">    @Permission(&quot;my.permission1&quot;)
    @Command(&quot;simple&quot;)
    public class SimpleCommand implements CommandNode {

        @SubCommand(&quot;set &lt;int&gt;&quot;)
        public void set(Sender sender, int value) {
            // Do something
        }

        @Description(&quot;Variant that clear stuff&quot;)
        @Permission(&quot;my.permission2&quot;)
        @SubCommand(&quot;clear&quot;)
        public void clear(Sender sender) {
            // Do something
        }

    }
</div></div></div></section><section class="chapter"><h2 id="advantages" data-toc="advantages">Advantages</h2></section><div class="last-modified">Last modified: 07 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="compound-parser.html" class="navigation-links__prev">ðŸ”¬ Compound parser</a><a href="spigot.html" class="navigation-links__next">ðŸš° Spigot</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.js"></script></body></html>