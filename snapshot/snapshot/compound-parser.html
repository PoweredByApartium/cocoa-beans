<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-10-11T19:49:20.782171565"><title>üî¨ Compound parser | Cocoa Beans</title><script type="application/json" id="virtual-toc-data">[{"id":"introduction","level":0,"title":"Introduction","anchor":"#introduction"},{"id":"usage","level":0,"title":"Usage","anchor":"#usage"},{"id":"advantages","level":0,"title":"Advantages","anchor":"#advantages"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.css" rel="stylesheet"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="üî¨ Compound parser | Cocoa Beans"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Cocoa Beans Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation//snapshot/compound-parser.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="üî¨ Compound parser | Cocoa Beans"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation//snapshot/compound-parser.html#webpage",
    "url": "writerside-documentation//snapshot/compound-parser.html",
    "name": "üî¨ Compound parser | Cocoa Beans",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Cocoa Beans Help"
}</script><!-- End Schema.org --></head><body data-id="compound-parser" data-main-title="üî¨ Compound parser" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="commands.md|üíª The command system///examples.md|üìå Examples"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Cocoa Beans snapshot Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="compound-parser" id="compound-parser.md">üî¨ Compound parser</h1><p id="bt8eno_2"><sup class="superscript" id="bt8eno_3">Available Since 0.0.37</sup></p><p id="bt8eno_4"><span class="control" id="bt8eno_5">Table of content:</span></p><ul class="list _bullet" id="bt8eno_6"><li class="list__item" id="bt8eno_7"><p><a href="#introduction" id="bt8eno_8" data-tooltip="Writing custom parsers for complicated arguments, such as locations, can be a tedious and error prone task. For this reason we have added a way to define compound parsers in the same way its possible to define commands. Each parser could have multiple variants with different input‚Ä¶">Introduction</a></p></li><li class="list__item" id="bt8eno_9"><p><a href="#usage" id="bt8eno_10" data-tooltip="We will create a simple compound parser called LocationParser that will parse a location from a string doubles, We will also have a variant with yaw &amp; pitch as float">Usage</a></p></li><li class="list__item" id="bt8eno_11"><p><a href="#advantages" id="bt8eno_12" data-tooltip="Improved Readability üìñ: The compound parser provides a clear and descriptive name for each variant, making the command structure more readable and self-explanatory. Easier to Use üëç: The compound parser is easy to use and can be used to create complex parsers with multiple‚Ä¶">Advantages</a></p></li></ul><section class="chapter"><h2 id="introduction" data-toc="introduction">Introduction</h2><p id="bt8eno_13">Writing custom parsers for complicated arguments, such as locations, can be a tedious and error prone task. For this reason we have added a way to define compound parsers in the same way its possible to define commands. Each parser could have multiple variants with different input types.</p></section><section class="chapter"><h2 id="usage" data-toc="usage">Usage</h2><p id="bt8eno_14">We will create a simple compound parser called <code class="code" id="bt8eno_15">LocationParser</code> that will parse a location from a string doubles, We will also have a variant with yaw &amp; pitch as float</p><div class="tabs" id="bt8eno_16" data-anchors="[bt8eno_17]"><div class="tabs__content" data-gtm="tab" id="bt8eno_17" data-title="LocationParser.java"><div class="code-block" data-lang="java" data-title="Java">
// We need to provide all of our parsers that we will want to use
@WithParser(DoubleParser.class)
@WithParser(FloatParser.class)
@WithParser(WorldParser.class)
public class LocationParser extends CompoundParser&lt;Location&gt; {
    
    public static final String DEFAULT_KEYWORD = &quot;location&quot;;
    
    public LocationParser(int priority, String keyword) {
        super(
          keyword, // We need to provide a keyword
          Location.class, // We need to provide a type of the result
          priority, // We need to provide a priority of the parser
          new SimpleArgumentMapper(), // argument mapper to map arguments
          new SimpleCommandLexer()// command lexer to tokenize the variant
        );
    }

    public LocationParser(int priority) {
        this(priority, DEFAULT_KEYWORD);
    }

    // Simple variant
    @ParserVariant(&quot;&lt;world&gt; &lt;double&gt; &lt;double&gt; &lt;double&gt;&quot;)
    public Location parseWorldWithXyz(World world, double x, double y, double z) {
        return new Location(world, x, y, z);
    }

    // another variant with yaw &amp; pitch
    @ParserVariant(&quot;&lt;world&gt; &lt;double&gt; &lt;double&gt; &lt;double&gt; &lt;float&gt; &lt;float&gt;&quot;)
    public Location parseWorldWithXyzYawPitch(World world, double x, double y, double z, float yaw, float pitch) {
        return new Location(world, x, y, z, yaw, pitch);
    }
    
    // We could also have a requirement
    @SenderLimit(SenderType.PLAYER)
    @ParserVariant(&quot;&lt;double&gt; &lt;double&gt; &lt;double&gt;&quot;)
    public Location parseWithXyz(Player sender, double x, double y, double z) {
        return new Location(
                sender.getWorld(),
                x,
                y,
                z
        );
    }

    @SenderLimit(SenderType.PLAYER)
    @ParserVariant(&quot;&lt;double&gt; &lt;double&gt; &lt;double&gt; &lt;float&gt; &lt;float&gt;&quot;)
    public Location parseWithXyzYawPitch(Player sender, double x, double y, double z, float yaw, float pitch) {
        return new Location(
                sender.getWorld(),
                x,
                y,
                z,
                yaw,
                pitch
        );
    }
}
</div></div></div><p id="bt8eno_19">That is everything you need to do to create your own compound parser. There are a couple of things to note:</p><ul class="list _bullet" id="bt8eno_20"><li class="list__item" id="bt8eno_21"><p>You need to provide all of your parsers that you will want to use</p></li><li class="list__item" id="bt8eno_22"><p>You may want to create a wrapper class that will wrap your compound parser and will cache the variants so you don't have to create them every time someone want to change keyword/priority</p></li></ul><section class="chapter"><h3 id="how-could-we-warp-it" data-toc="how-could-we-warp-it">How could we warp it?</h3><p id="bt8eno_23">We will change <code class="code" id="bt8eno_24">LocationParser</code> to be called <code class="code" id="bt8eno_25">LocationParserImpl</code> and put it as <code class="code" id="bt8eno_26">/* package-private */</code> then we will create class <code class="code" id="bt8eno_27">LocationParser</code> that will be public</p><div class="code-block" data-lang="java">
public class LocationParser extends ArgumentParser&lt;Location&gt; {
    
    private static LocationParserImpl impl = new LocationParserImpl();

    public static final String DEFAULT_KEYWORD = &quot;location&quot;;

    public LocationParser(int priority, String keyword) {
        super(
                keyword,
                Location.class,
                priority
        );
    }
    
    public LocationParser(int priority) {
        this(priority, DEFAULT_KEYWORD);
    }

    @Override
    public Optional&lt;ParseResult&lt;T&gt;&gt; parse(CommandProcessingContext processingContext) {
        return impl.parse(processingContext);
    }
    
    @Override
    public OptionalInt tryParse(CommandProcessingContext processingContext) {
        return impl.tryParse(processingContext);
    }
    
    @Override
    public Optional&lt;TabCompletionResult&gt; tabCompletion(CommandProcessingContext processingContext) {
        return impl.tabCompletion(processingContext);
    }

}
</div><p id="bt8eno_29">That will save you memory and computation time but the parsers you use must support multithreading because there could be multiple threads running at the same time, and you don't want to create a new instance of the parser every time. You could lock the parser but it's not recommended because it will slow down the parsing process.</p></section></section><section class="chapter"><h2 id="advantages" data-toc="advantages">Advantages</h2><ul class="list _bullet" id="bt8eno_30"><li class="list__item" id="bt8eno_31"><p><span class="control" id="bt8eno_32">Improved Readability</span> üìñ: The compound parser provides a clear and descriptive name for each variant, making the command structure more readable and self-explanatory.</p></li><li class="list__item" id="bt8eno_33"><p><span class="control" id="bt8eno_34">Easier to Use</span> üëç: The compound parser is easy to use and can be used to create complex parsers with multiple parameters and variants with different requirements.</p></li><li class="list__item" id="bt8eno_35"><p><span class="control" id="bt8eno_36">Reduced Code</span> üì¶: The compound parser is a reusable component that can be used in multiple commands to avoid code duplication and reduce the amount of code needed to write a command.</p></li><li class="list__item" id="bt8eno_37"><p><span class="control" id="bt8eno_38">Increased Flexibility</span> üéØ: The compound parser allows you to create parsers that are more complex and can be used in multiple places in your command structure.</p></li><li class="list__item" id="bt8eno_39"><p><span class="control" id="bt8eno_40">Reduced Error Prone</span> üêõ: The compound parser is easy to use and can be used to create complex parsers with multiple parameters and variants with different requirements.</p></li></ul></section><div class="last-modified">Last modified: 07 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="parameter-name.html" class="navigation-links__prev">üìÆ Parameter name</a><a href="virtual-command.html" class="navigation-links__next">ü§ñ Virtual Command</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.js"></script></body></html>